{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Dorra\\\\ng-certification-master\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\classCallCheck.js\";\nimport _createClass from \"C:\\\\Users\\\\Dorra\\\\ng-certification-master\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\createClass.js\";\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component } from \"@angular/core\";\n\nvar ZipCodeComponent = /*#__PURE__*/function () {\n  function ZipCodeComponent(weatherService, sharedService, router) {\n    _classCallCheck(this, ZipCodeComponent);\n\n    this.weatherService = weatherService;\n    this.sharedService = sharedService;\n    this.router = router;\n    this.weatherConditions = [];\n    this.picturesUrl = \"https://www.angulartraining.com/images/weather/\";\n  }\n\n  _createClass(ZipCodeComponent, [{\n    key: \"ngOnInit\",\n    value: function ngOnInit() {\n      var _this = this;\n\n      var zipCodes = JSON.parse(localStorage.getItem('zipCodes') || '[]');\n      zipCodes.forEach(function (zipCode) {\n        _this.getWeather(zipCode);\n      });\n    }\n  }, {\n    key: \"addZipCode\",\n    value: function addZipCode() {\n      var storedZipCodes = localStorage.getItem(\"zipCodes\");\n      var zipCodes = [];\n\n      if (storedZipCodes) {\n        zipCodes = JSON.parse(storedZipCodes);\n      }\n\n      zipCodes.push(this.zipCode);\n      localStorage.setItem(\"zipCodes\", JSON.stringify(zipCodes));\n      this.getWeather(this.zipCode);\n      this.zipCode = \"\";\n    } // get Lat and lon from service and inject it to find the city and the weather conditions\n\n  }, {\n    key: \"getWeather\",\n    value: function getWeather(zipCode) {\n      var _this2 = this;\n\n      this.weatherService.getWeatherDetails(zipCode) // .subscribe((data: { lat: number; lon: number }) => {\n      //   console.log(\" lat \" + data.lat + \" and lon \" + data.lon);\n      //    this.weatherService\n      //     .getWeatherDetails(data.lat, data.lon)\n      .subscribe(function (results) {\n        _this2.test = results; //this.setWeatherIcon(results.mainWeatherDescription);\n\n        _this2.navigateToForecast(results.zipCode);\n\n        _this2.weatherConditions.push(results);\n\n        console.log(_this2.test, 'this is the weather');\n      }); // });\n    }\n  }, {\n    key: \"setWeatherIcon\",\n    value: function setWeatherIcon(weatherCondition) {\n      console.log(this.weatherIconUrl, 'this is the weather icon');\n      this.weatherIconUrl = this.sharedService.getWeatherIconUrl(weatherCondition);\n    }\n  }, {\n    key: \"navigateToForecast\",\n    value: function navigateToForecast(zipCode) {\n      this.router.navigate(['/forecast', zipCode]);\n    }\n  }]);\n\n  return ZipCodeComponent;\n}();\n\nZipCodeComponent = __decorate([Component({\n  selector: \"app-zip-code\",\n  templateUrl: \"./zip-code.component.html\",\n  styleUrls: [\"./zip-code.component.css\"]\n})], ZipCodeComponent);\nexport { ZipCodeComponent };","map":null,"metadata":{},"sourceType":"module"}